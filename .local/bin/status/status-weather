#!/bin/sh

case $BUTTON in
  1) setsid -f st -t float -g 126x39 -e sh -c app-weather ;;
  3) dunstify -h string:x-dunst-stack-tag:weather "ï©‰ $(curl https://wttr.in/$LOCATION?format='%l+weather\n%C,+%t+(%f)\nWind+%w+\nMoon+day+%M\nPrecipitation+%p+(3+hours)\nPressure+%P\nUV+index+%u/12\nSunrise+%S\nSunset+%s' || echo 'Wttr currently down')" ;;
esac

ping -q -c 1 example.org > /dev/null && \
  weather=$(curl https://wttr.in/$LOCATION?format='%c+%f' | sed "s/\ \ //g;s/\ \ \ /\ /g;s/îŒ•/îŒ•\ /g;s/ğŸŒ«/ïª /g;s/â˜€/îŒ/g;s/â˜/îŒ½/g;s/â›…/îŒ‚\ /g;s/â›ˆ/îŒœ\ /g;s/ğŸŒ©/îŒ•/g;s/ğŸŒ©/îŒ•/g;s/ğŸŒ¤/îŒŒ/g;s/ğŸŒ¥/îŒ‚\ /g;s/ğŸŒ¦/îŒ‰ /g;s/ğŸŒ§/îŒ™ /g;s/ğŸŒ¨/îŒš\ /g")
[ ${#weather} -gt 20 ] && weather="ï©‰"

echo "$weather"
