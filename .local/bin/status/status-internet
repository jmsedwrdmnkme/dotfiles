#!/bin/sh

interface="wlp1s0"
wifiicon="睊"

case "$(cat /sys/class/net/$interface/operstate 2>/dev/null)" in
  down) wifiicon="睊";;
  up) wifiicon="$(awk '/^\s*w/ { print "直"}' /proc/net/wireless | sed 's/ //')";;
esac

network="$(awk '/^\s*w/ { print int($3 * 100 / 70) "%" }' /proc/net/wireless | sed 's/ //')"
ssid="$(iw dev $interface link | grep SSID | awk '{print $2}')"

dunstify -h string:x-dunst-stack-tag:internet "$wifiicon Network" "$ssid $network"

case $BUTTON in
  1) setsid -f st -t float -g 126x42 -e app-internet ;;
  3) dunstify -h string:x-dunst-stack-tag:internet "$wifiicon Network" "$ssid $network" ;;
esac

echo "$wifiicon"
